CREATE EXTERNAL TABLE {{database}}.{{table}} (
{% for c in columns -%} 
    `{{c.name}}` {{c.type}} COMMENT `{{c.description}}`
{% endfor -%}
)
{% if partitions -%}
PARTITION BY (
{% for p in partitions -%}
    `{{p.name}}` {{p.type}} COMMENT `{{p.description}}`
{% endfor -%}
)
{% endif -%}
ROW FORMAT SERDE
    'org.apache.hive.hcatalog.data.JsonSerDe'
WITH SERDEPROPERTIES (
    'paths'='{{json_col_paths}}'
)
STORED AS INPUTFORMAT
    'org.apache.hadoop.mapred.TextInputFormat'
OUTPUTFORMAT
    'org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat'
LOCATION
    '{{location}}'
TBLPROPERTIES (
    'classification'='json'
);
